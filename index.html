<!DOCTYPE html>
<!-- Versjon 2 -->
<html lang="no">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="fagprøve, sensor, spørsmål, elektro, elektrofag, elektriker, NEK400, FEL, fagbrev">
   <link rel="icon" href="ohmtegn1.png">
  <title>Sluttkontrollspillet</title>
  <style>
    * {
      font-family: Arial, sans-serif;
    }
   #start-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  min-height: 100vh;
  background: white;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  padding: 40px 20px;
  box-sizing: border-box;
  overflow-y: auto;
  z-index: 100;
  padding-top: 200px;


    }
    #player-name {
      font-size: 1.2em;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 10px;
    }
    #start-overlay button, .start-button {
      font-size: 2em;
      padding: 15px 30px;
      background: #f9d904;
      color: rgb(0, 0, 0);
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: background 0.2s;
    }
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
    }
    #game-container {
      max-width: 500px;
      width: 100%;
      padding: 20px;
      text-align: center;
    }
    #start-btn, .option {
      display: block;
      background: white;
      border: 2px solid #333;
      margin: 8px auto;
      width: 90%;
      max-width: 300px;
      padding: 12px;
      font-size: 1.1em;
      border-radius: 10px;
      transition: background 0.2s;
    }
    #start-btn {
      background: #30d5b7;
      color: white;
    }
   .option {
  background: #f9d904;
  color: rgb(0, 0, 0);
  border: none;
  padding: 12px;
  font-size: 1.1em;
  border-radius: 10px;
  transition: background 0.2s;
  width: 100%;
  max-width: 300px;
  margin: 5px auto;
  text-align: center;
    cursor: pointer;
}


 
    #timer {
      font-size: 2em;
      margin-bottom: 4px;
    }
    #result {
      font-size: 1.2em;
      margin-top: 0px;
    }
 
    #diode-panel {
      margin-top: 0px;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 20px;
    }
   .diode {
  width: 100%;
  max-width: 60px;
  height: 30px;
  margin: 5px auto;
  background: #ddd;
  border-radius: 15px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  transition: background 0.3s;
  border: 1px solid black;
}


    .diode.on {
      background: red;
      color: white;
    }
    #options {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }
    #leaderboard {
      margin-top: 5px;
    }
    #leaderboard ol {
      padding-left: 0;
      list-style-position: inside;
    }
    #leaderboard li:first-child {
      font-size: 1.3em;
      padding: 8px;
      font-weight: bold;
    }
   
    @keyframes flash {
      0% { background-color: #5c5b5b; color: white; }
      100% { background-color: white; color: black; }
    }
 .logo-text {
  font-size: clamp(2.5rem, 8vw, 4rem); /* auto-skalerende tekst */
  font-family: 'Arial', cursive;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-weight: bold;
  color: #e63946;
  text-shadow: 2px 2px 0 #ffffff, 4px 4px 0 #00000033;
  animation: float 2s ease-in-out infinite;
  margin-bottom: 30px;
}










    @keyframes float {
      0%, 100% {
        transform: translateY(0px);
      }
      50% {
        transform: translateY(-8px);
      }
    }




    #penalty-text {
  color: rgb(255, 0, 0);
  font-weight: bold;
  margin-top: 10px;
  font-size: 1.2em;
}


@keyframes pulse {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.1); opacity: 0.5; }
  100% { transform: scale(1); opacity: 1; }
}


.pulsing {
  animation: pulse 1.5s ease-in-out infinite;
  color: red;
  font-weight: bold;
}




#question {
  font-size: clamp(1.2em, 2.5vw, 1.8em);
  min-height: 3em;
  max-height: 6em;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 0 10px;
  line-height: 1.3;
  word-break: break-word;
  overflow-wrap: break-word;
  overflow-y: auto; /* unngå overflow uten å ekspandere */
  transition: background-color 0.3s ease;
  max-width: 100%;
  margin-bottom: 10px; /* reduser fra evt. høyere verdi */


}


#options {
  min-height: 12em; /* hold fast høyde uansett om skjult */
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  transition: opacity 0.2s ease;
}




#penalty-text {
  min-height: 2em; /* reservér plass selv om teksten er tom */
  color: rgb(255, 0, 0);
  font-weight: bold;
  font-size: clamp(1em, 2vw, 1.2em);
  text-align: center;
  transition: all 0.3s ease-in-out;
}


#game-container {
  max-width: 500px;
  width: 90%;
  padding: 20px;
  text-align: center;
  margin: 0 auto;
}


#quiz-content {
  width: 100%;
}


.option {
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}


.option.flash {
  background-color: #ccc !important;
}


.dropdown {
  display: inline-block;
  padding-left: 7px;
}


.dropdown button {
  background-color: rgb(222, 222, 222);
  color: rgb(0, 0, 0);
  padding: 10px 15px;
  border: none;
  cursor: pointer;
  font-size: 15px;
  border-radius: 20px;
}


.dropdown .content {
  display: none;
  position: absolute;
  background-color: hsl(0, 0%, 95%);
  min-width: 100px;
  box-shadow: 2px 2px 5px hsla(0, 0%, 0%, 0.8);
  border-radius: 20px;
}


.dropdown.active .content {
  display: block;
}


.dropdown:hover button {
  background-color: hsl(0, 0%, 70%);
}


.dropdown a {
  display: block;
  color: black;
  text-decoration: none;
  padding: 10px 15px;
  border-radius: 50px;
}


.dropdown a:hover {
  background-color: hsl(0, 0%, 90%);
}


.dropdown {
  position: absolute;
  top: 10px;
  left: 10px;
  z-index: 200;
}


#bottom-info {
  margin-top: 60px;
  padding: 20px;
  text-align: center;
  font-size: 0.95em;
  max-width: 90%;
  word-wrap: break-word;
}


#bottom-info p {
  margin: 10px 0;
}


#bottom-info img {
  max-width: 100%;
  height: auto;
  margin-top: 10px;
}


.generate-link-button {
  background-color: rgb(121, 255, 255);
  color: rgb(0, 0, 0);
  padding: 12px 24px;
  border: none;
  border-radius: 50px;
  font-size: 18px;
  text-decoration: none;
  cursor: pointer;
  transition: background-color 0.2s ease-in-out;
}




.generate-link-button:hover {
  background-color: rgb(0, 255, 255);
}


.small-button {
  font-size: 1em;        /* mindre tekst */
  padding: 8px 16px;     /* mindre høyde og bredde */
}


 
  </style>
</head>
<body>




  <div class="dropdown">
  <button>Mer</button>
  <div class="content">
    <a href="index.html">Forside</a>
    <a href="generator.html">Spørsmålsgenerator</a>
    <a href="index.html">Sluttkontrollspillet</a>    
    <a href="kabelogvern.html">Dokumentere kabel og vern</a>
    <a href="makslengde.html">Tabell for maks lengde</a>
    <a href="om.html">Om</a>
  </div>
  </div>


 


  <div id="start-overlay">


   
    <h1>Nyhet!</h1>
    <div class="logo-text">Sluttkontrollspillet</div>
    <input type="text" id="player-name" placeholder="Skriv inn navn"><br>
    <button id="start-btn">Start spillet</button>
      <p>El-sjekk deg selv!</p>


    <div id="bottom-info">


      <!--
 <p style="margin-top: 50px;">
    Psst! Spørsmålsgeneratoren med spørsmål til fagprøven finner du her: <p><br></p>
    <a href="index.html" class="generate-link-button">Spørsmålsgenerator</a>
  </p>
<p><br></p>-->


<p style="margin-top: 60px;"></p>
  <p>Versjon under utvikling</p>
  <img src="logoohmslov.png" alt="ohmslov.no" height="50">
  <br>
  <a href="https://www.ohmslov.no/">ohmslov.no</a>
</div>






 
  </div>
  <div id="game-container">
    <div id="quiz-content" style="display:none;">
      <div id="diode-panel">
        <div class="diode" id="d-1000">1000V</div>
        <div class="diode" id="d-690">690V</div>
        <div class="diode" id="d-400">400V</div>
        <div class="diode" id="d-230">230V</div>
        <div class="diode" id="d-133">133V</div>
        <div class="diode" id="d-50">50V</div>
        <div class="diode" id="d-24">24V</div>
        <div class="diode" id="d-12">12V</div>
      </div>
      <div id="timer">0.0s</div>
      <div id="result"></div>
      <div id="leaderboard"></div>
     
<div id="question"></div>
<div id="penalty-text"></div> <!-- FLYTTET HIT -->
<div id="options"></div>
    </div>
   
 <div id="bottom-info">
<p style="margin-top: 0px;"></p>
  <p>Versjon under utvikling</p>
  <img src="logoohmslov.png" alt="ohmslov.no" height="50">
  <br>
  <a href="https://www.ohmslov.no/">ohmslov.no</a>
</div>


  </div>
<script>
// Forhindre at mobilnettleser fokuserer input automatisk og skroller ned
const playerNameInput = document.getElementById("player-name");
playerNameInput.setAttribute("readonly", true);
setTimeout(() => playerNameInput.removeAttribute("readonly"), 100);


const startBtn = document.getElementById("start-btn");
const quizContent = document.getElementById("quiz-content");
const questionDiv = document.getElementById("question");
const optionsDiv = document.getElementById("options");
const timerDiv = document.getElementById("timer");
const resultDiv = document.getElementById("result");
const penaltyText = document.getElementById("penalty-text");
const startOverlay = document.getElementById("start-overlay");


let questions = [
{ q: "Hva er kravet til en kontinuitetsmåling?", options: ["Målt verdi i samsvar med ledertverrsnitt og lederlengde", "Mindre enn 1Ω"], answer: 0 },
 { q: "Hva er kravet til en isolasjonsmåling?", options: ["Mer enn 1MΩ", "Uendelig"], answer: 0 },
  { q: "Hva skal jordfeilbrytere testes med?", options: ["Testknapp eller måleinstrument", "Lommelykt"], answer: 0 },
  { q: "Hva skal visuell kontroll avdekke?", options: ["Feil montering og skader", "Fargevalg på vegger"], answer: 0 },
  { q: "Når skal sluttkontroll utføres?", options: ["Før anlegget tas i bruk", "Etter første strømregning"], answer: 0 },
  { q: "Hvilket dokument brukes ved sluttkontroll?", options: ["Rapport fra sluttkontroll", "Ordrebekreftelse"], answer: 0 },
  { q: "Hva betyr CE-merking?", options: ["At utstyret oppfyller EU-krav", "At det er produsert i Europa"], answer: 0 },
  { q: "Hva kontrolleres ved fasefølgetest?", options: ["Riktig rekkefølge på faser", "Om alle faser har samme farge"], answer: 0 },
  { q: "Hvilket verktøy brukes for å måle isolasjonsmotstand?", options: ["Isolasjonstester", "Tangamperemeter"], answer: 0 },
  { q: "Når skal samsvarserklæring utstedes?", options: ["Etter fullført og godkjent kontroll", "Før installasjonen starter"], answer: 0 },
  { q: "Hva kan lav isolasjonsverdi tyde på?", options: ["Feil eller skade på anlegget", "God jording"], answer: 0 },
{ q: "Hva er hensikten med en risikovurdering?", options: ["Forebygge fare og tilpasse installasjonen", "Bestemme farge på ledninger"], answer: 0 },
{ q: "Hva kontrolleres ved kontinuitetsmåling?", options: ["Sammenheng i beskyttelsesleder", "Motstand i jordfeilbryter"], answer: 0 },
{ q: "Hva må være dokumentert i en sluttkontroll?", options: ["Måleresultater og visuell kontroll", "Timer brukt på jobben"], answer: 0 },
{ q: "Hva brukes en tangamperemeter til?", options: ["Måle strøm uten å bryte kretsen", "Måle lengden på kabel"], answer: 0 },
{ q: "Hva er en samsvarserklæring?", options: ["Bekreftelse på at anlegget følger gjeldende krav", "Kundeavtale for strøm"], answer: 0 },
{ q: "Hva skal jordelektrode være koblet til?", options: ["Hovedjordskinne", "Belysningskurs"], answer: 0 },
{ q: "Når skal kontinuitetsmåling utføres?", options: ["Før anlegget spenningssettes", "Etter sluttfaktura er sendt"], answer: 0 },
{ q: "Hva indikerer høy motstand i en kontinuitetsmåling?", options: ["Brudd eller dårlig forbindelse", "God jording"], answer: 0 },
{ q: "Hvorfor er kontinuitetsmåling viktig?", options: ["For å sikre at jordingsforbindelser fungerer", "For å måle spenningsfall"], answer: 0 },
{ q: "Hva er et vanlig tegn på dårlig kontinuitet?", options: ["Høy eller ustabil motstandsverdi", "Lav spenning på stikkontakt"], answer: 0 },
{ q: "Hva kan skje ved feil fasefølge?", options: ["Motor går feil vei", "Sikringen slår ut automatisk"], answer: 0 },
{ q: "Hva måles ved isolasjonsmåling?", options: ["Motstand mellom ledere og jord", "Lengden på kabelen"], answer: 0 },
{ q: "Hva er minstekravet til isolasjonsmotstand?", options: ["1MΩ", "10Ω"], answer: 0 },
{ q: "Når skal isolasjonsmåling utføres?", options: ["Før anlegget spenningssettes", "Etter at kunden har flyttet inn"], answer: 0 },
{ q: "Hva kan lav isolasjonsmotstand tyde på?", options: ["Skade på kabel eller fukt", "God kontakt mellom faser"], answer: 0 },
{ q: "Hvilken spenning brukes vanligvis ved isolasjonsmåling?", options: ["500V DC", "230V AC"], answer: 0 },
{ q: "Hva må frakobles før isolasjonsmåling?", options: ["Elektronisk utstyr og følsomme komponenter", "Jordelektroden"], answer: 0 },
{ q: "Hva skjer hvis det er kortslutning mellom L og PE?", options: ["Isolasjonsmålingen viser lav verdi", "Spenningen øker"], answer: 0 },
{ q: "Hvor skal måleledninger kobles ved isolasjonsmåling?", options: ["Mellom fase og jord", "Til jordelektroden og vannrør"], answer: 0 },
{ q: "Hva er en samsvarserklæring?", options: ["Dokumentasjon på at installasjonen følger regelverket", "Søknad om strømabonnement"], answer: 0 },
{ q: "Når skal samsvarserklæring utstedes?", options: ["Etter fullført og godkjent installasjon", "Før arbeidet starter"], answer: 0 },
{ q: "Hvorfor er god dokumentasjon viktig?", options: ["For å vise at anlegget er sikkert og regelmessig utført", "For å imponere kunden"], answer: 0 },
{ q: "Hvilket skjema anbefaler DSB ved sluttkontroll?", options: ["Rapport fra sluttkontroll (5 sikre)", "Elektronisk faktura"], answer: 0 },
{ q: "Hva dekker del 7 i NEK 400?", options: ["Spesielle installasjoner og områder", "Grunnleggende elektrotekniske prinsipper"], answer: 0 },
{ q: "Hva stilles det krav om i våtrom etter NEK 400-7-701?", options: ["Soneinndeling og bruk av jordfeilbrytere", "Farge på baderomsfliser"], answer: 0 },
{ q: "Hva måles for å kontrollere jordelektrode?", options: ["Overgangsmotstand til jord", "Luftfuktighet i bakken"], answer: 0 },
{ q: "Hvordan kan man teste en jordfeilbryter manuelt?", options: ["Ved å trykke på testknappen", "Ved å måle spenning på PE-leder"], answer: 0 },
{ q: "For kontinuitetsmåling skal man bruke måleinstrument med målestrøm på minst…", options: ["200mA", "1A"], answer: 0 },
{ q: "Det er kun nødvendig å kontinuitetsmåle jordingen i stikkontakten ytterst på kretsen", options: ["Usant", "Sant"], answer: 0 },
{ q: "Hva er mest sannsynlig å måleresultat ved kontinuitetsmåling i en 30 meter lang stikkontakt-kurs?", options: ["0,21Ω", "15Ω"], answer: 0 },
{ q: "Hva er mest sannsynlig å måleresultat ved kontinuitetsmåling i en 50 meter lang stikkontakt-kurs?", options: ["0,35Ω", "1MΩ"], answer: 0 },
{ q: "Hvilken måling skal utføres først?", options: ["Kontinuitetsmåling", "Isolasjonsmåling"], answer: 0 },
{ q: "Hvilken målespenning skal isolasjonsmåling normalt utføres med?", options: ["500V", "200mA"], answer: 0 },
];


let questionList = [];
let currentQuestion = 0;
let correctCount = 0;
let startTime = 0;
let isPenalty = false;
let timerInterval;
const elektroPraises = [


  "Kjenn på spenningen!",
   "Full kortslutning!",
  "Den satt i sikringsboksen!",
  "Raskere enn lynet!",
  "Du er elektrisk!",
  "Ingen kortslutning her!",
  "Skulle tro du var CE-merket!",
  "Som et elektron!",


];


const diodeOrder = ["d-12", "d-24", "d-50", "d-133", "d-230", "d-400", "d-690", "d-1000"];


function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}


function updateTimer() {
  const now = Date.now();
  const elapsed = (now - startTime) / 1000;
  timerDiv.textContent = `${elapsed.toFixed(1)}s`;
}


function updateDiodes() {
  diodeOrder.forEach((id, index) => {
    const diode = document.getElementById(id);
    if (index < correctCount) diode.classList.add("on");
    else diode.classList.remove("on");
  });
}


function showQuestion() {
  if (correctCount >= 8) return finishGame();
  if (currentQuestion >= questionList.length) {
    questionList = shuffle([...questions]);
    currentQuestion = 0;
  }
  const q = questionList[currentQuestion];
  questionDiv.textContent = q.q;
  optionsDiv.innerHTML = "";
  const options = [
    { text: q.options[q.answer], isCorrect: true },
    { text: q.options[1 - q.answer], isCorrect: false },
  ];
  shuffle(options).forEach(opt => {
    const btn = document.createElement("button");
    btn.textContent = opt.text;
    btn.className = "option";
   btn.onclick = () => {
  btn.classList.add("flash");
  setTimeout(() => {
    btn.classList.remove("flash");
    checkAnswer(opt.isCorrect);
  }, 100); // blink i 100ms
};


    optionsDiv.appendChild(btn);
  });
  penaltyText.textContent = "";
}




function checkAnswer(isCorrect) {
  if (isPenalty) return;


  // Deaktiver alle knapper midlertidig
  document.querySelectorAll('.option').forEach(btn => {
    btn.style.pointerEvents = 'none';
    btn.style.backgroundColor = '#f9d904'; // tving tilbake gul
  });


  // Vent litt før DOM endres (gir Safari tid til å fjerne trykk-visning)
  setTimeout(() => {
    if (isCorrect) {
      correctCount++;
      updateDiodes();
      if (correctCount >= 8) return finishGame();
      currentQuestion++;
      showQuestion();
   
      } else {
  isPenalty = true;
  penaltyText.textContent = "Feil svar! 5 sekunders tidsstraff...";
  penaltyText.classList.add("pulsing");
  optionsDiv.style.opacity = "0.3";


  setTimeout(() => {
    isPenalty = false;
    penaltyText.textContent = "";
    penaltyText.classList.remove("pulsing");
    currentQuestion++;
    showQuestion();
    optionsDiv.style.opacity = "1";
  }, 5000);


    }
  }, 50); // liten forsinkelse – viktig for mobil
}










function finishGame() {
  clearInterval(timerInterval);
  const totalTime = ((Date.now() - startTime) / 1000).toFixed(1);
  timerDiv.textContent = `${totalTime}s`; // vis nøyaktig sluttid i telleren
  questionDiv.style.display = "none";
  optionsDiv.innerHTML = "";
  optionsDiv.style.display = "none";


 




  const diodes = document.querySelectorAll('.diode');
  let blinkCount = 0;
  const blinkInterval = setInterval(() => {
    diodes.forEach(d => d.classList.toggle('on'));
    blinkCount++;
    if (blinkCount >= 10) clearInterval(blinkInterval);
  }, 200);


  const name = document.getElementById("player-name").value.trim();
  const score = { name, time: parseFloat(totalTime) };
  const scores = JSON.parse(localStorage.getItem("leaderboard") || "[]");
  scores.push(score);
  scores.sort((a, b) => a.time - b.time);
  localStorage.setItem("leaderboard", JSON.stringify(scores));


const rank = scores.findIndex(s => s.name === name && s.time === score.time) + 1;


const topScores = scores.slice(0, 20); // vis kun topp 20


let leaderboardHTML = '<h1>Toppliste</h1><ol>';
topScores.forEach((s) => {
  leaderboardHTML += `<li>${s.name} – ${s.time}s</li>`;
});
leaderboardHTML += `
</ol>
<div style="margin-top: 20px;">
 <button onclick="resetLeaderboard()" class="start-button small-button" style="background-color: #ccc; color: black;">Nullstill toppliste</button>
</div>
`;




const praise = elektroPraises[Math.floor(Math.random() * elektroPraises.length)];


let placementMessage = rank <= 20
  ? ` og havnet på ${rank}. plass!`
  : `, men havnet dessverre utenfor topplisten.`;


resultDiv.innerHTML = `
  <p>${praise} Du brukte ${totalTime} sekunder${placementMessage}</p>
  <button class="start-button" onclick="location.reload()">Start på nytt</button>
`;




  document.getElementById("leaderboard").innerHTML = leaderboardHTML;
}


function startGame() {
  const name = document.getElementById("player-name").value.trim();
  if (!name) return alert("Skriv inn navnet ditt for å starte.");


  // Scroll til toppen ved start (hindrer automatisk nedrulling på mobil)
  window.scrollTo({ top: 0, behavior: "auto" });


  startOverlay.style.display = "none";
  quizContent.style.display = "block";
  correctCount = 0;
  currentQuestion = 0;
  startTime = Date.now();
  questionDiv.style.display = "block";
  optionsDiv.style.display = "flex";
  updateDiodes();
  timerInterval = setInterval(updateTimer, 100);
  questionList = shuffle([...questions]);
  showQuestion();
}


startBtn.addEventListener("click", startGame);




document.querySelectorAll('.dropdown > button').forEach(button => {
  button.addEventListener('click', function () {
    const parent = this.parentElement;
    parent.classList.toggle('active');
  });
});


document.addEventListener('click', function (event) {
  document.querySelectorAll('.dropdown').forEach(drop => {
    if (!drop.contains(event.target)) {
      drop.classList.remove('active');
    }
  });
});


window.addEventListener("load", () => {
  window.scrollTo({ top: 0, behavior: "auto" });
});




function resetLeaderboard() {
  if (confirm("Er du sikker på at du vil slette topplisten?")) {
    localStorage.removeItem("leaderboard");
    location.reload();
  }
}

              <script async defer src="https://scripts.simpleanalyticscdn.com/latest.js"></script>
              <noscript><img src="https://queue.simpleanalyticscdn.com/noscript.gif" alt="" referrerpolicy="no-referrer-when-downgrade" /></noscript>
  


</script>



</body>
</html>







